(()=>{"use strict";function e(e){return String(e||"").split(",").map(e=>e.trim()).filter(Boolean)}function t(e,t={},s=[]){const a=document.createElement(e);for(const[s,l]of Object.entries(t))if(null!=l)if("text"===s)a.textContent=String(l);else if("class"===s)a.className=String(l);else if("style"===s)a.style.cssText=String(l);else if(s.startsWith("data-")){const e=s.slice(5).replace(/-([a-z])/g,e=>e[1].toUpperCase());a.dataset[e]=String(l)}else"value"!==s||"input"!==e&&"textarea"!==e&&"select"!==e?"checked"===s&&"input"===e?a.checked=!!l:a.setAttribute(s,String(l)):a.value=String(l);if(Array.isArray(s))for(const e of s)"string"==typeof e?a.appendChild(document.createTextNode(e)):a.appendChild(e);return a}function s(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function a(e,t){const s=document.createElement("i");return s.className=`codicon codicon-${e}${t?" "+t:""}`,s}function l(e,s,l="secondary"){const d=t("button",{class:l});return d.appendChild(a(e)),s&&d.appendChild(document.createTextNode(" "+s)),d}function d(a,d,i,n){const c=l("tag",a.tags&&a.tags.length>0?"Edit tags":"Add tags","secondary");return c.addEventListener("click",c=>{c.stopPropagation();const o=t("input",{type:"text",value:(a.tags||[]).join(", "),placeholder:"tag1, tag2",class:"grow"}),p=l("check","Save","primary"),r=l("close","Cancel","secondary");function h(){const t=e(o.value);JSON.stringify(t)!==JSON.stringify(a.tags||[])&&n.postMessage({type:"updateSkillMetadata",id:a.id,tags:t})}function y(){s(d),i()}s(d),d.appendChild(o),d.appendChild(p),d.appendChild(r),o.focus(),p.addEventListener("click",()=>{h(),y()}),r.addEventListener("click",y),o.addEventListener("keydown",e=>{"Enter"===e.key&&(h(),y()),"Escape"===e.key&&y()})}),c}function i(e,s,a={}){const{className:l="skill-item",nameClass:d="skill-title editable",checkboxClass:i,onCardClick:n,showActions:c=!0,actionBarClass:o="row action-bar",actionBarStyle:p}=a,r=t("div",{class:l});"function"==typeof n&&r.addEventListener("click",n);const h=t("div",{class:"row"});let y=null;i&&(y=t("input",{type:"checkbox",class:i,"data-skill-id":e.id}),y.addEventListener("click",e=>e.stopPropagation()),h.appendChild(y));const u=t("div",{class:d,text:e.name});u.title="Click to edit name",u.addEventListener("click",a=>{a.stopPropagation(),u.style.display="none";const l=t("input",{type:"text",value:e.name,class:"grow"});function d(){const t=l.value.trim();t&&t!==e.name&&s.postMessage({type:"updateSkillMetadata",id:e.id,customName:t}),h.removeChild(l),u.textContent=t||e.name,u.style.display="block"}l.addEventListener("blur",()=>d()),l.addEventListener("keydown",e=>{"Enter"===e.key&&d(),"Escape"===e.key&&(h.removeChild(l),u.style.display="block")}),h.appendChild(l),l.focus()}),h.appendChild(u),r.appendChild(h);const m=t("div",{class:"row"}),k=t("div",{class:"muted editable",text:e.description||"(no description)"});if(k.title="Click to edit description",k.addEventListener("click",a=>{a.stopPropagation(),k.style.display="none";const l=t("input",{type:"text",value:e.description||"",class:"grow"});function d(){l.value!==(e.description||"")&&s.postMessage({type:"updateSkillMetadata",id:e.id,customDescription:l.value}),m.removeChild(l),k.textContent=l.value||"(no description)",k.style.display="block"}l.addEventListener("blur",()=>d()),l.addEventListener("keydown",e=>{"Enter"===e.key&&d(),"Escape"===e.key&&(m.removeChild(l),k.style.display="block")}),m.appendChild(l),l.focus()}),m.appendChild(k),r.appendChild(m),e.tags&&e.tags.length>0){const s=t("div",{class:"skill-meta"});for(const a of e.tags){const e=t("span",{class:"tag",text:a});s.appendChild(e)}r.appendChild(s)}let v=null;return c&&(v=t("div",{class:o,style:p}),r.appendChild(v)),{card:r,actions:v,checkbox:y}}const n=window.acquireVsCodeApi();let c={discovered:[],imported:[],presets:[],defaultExportPath:".claude/skills/",storagePath:""};const o={expandedPresetIds:new Set,selectedPresetId:null,tagFilter:"all"};window.addEventListener("message",p=>{const r=p.data;"state"===r?.type&&(c={discovered:r.discovered??[],imported:r.imported??[],presets:r.presets??[],defaultExportPath:r.defaultExportPath??".claude/skills/",storagePath:r.storagePath??""},function(){const p=document.body.getAttribute("data-view")||"skillsWizard.importView",r=document.getElementById("app-root");r&&("skillsWizard.importView"===p?function(d,i,n){s(d);const c=t("div",{class:"stack"}),o=t("div",{class:"row"}),p=l("refresh","Scan Global + Workspace","primary");p.addEventListener("click",()=>n.postMessage({type:"refresh"})),o.appendChild(p);const r=l("folder-opened","Import from folder","secondary");r.addEventListener("click",()=>n.postMessage({type:"scanCustomPath"})),o.appendChild(r);const h=l("file-zip","Import bundle","secondary");h.addEventListener("click",()=>n.postMessage({type:"importBundle"})),o.appendChild(h),c.appendChild(o);const y=t("div",{class:"row"}),u=l("github","Import from GitHub","secondary");u.addEventListener("click",()=>{const e=c.querySelector(".github-input-row");if(e){const t=e.querySelector("input");return void(t&&t.focus())}const s=t("div",{class:"row github-input-row",style:"margin-top: 8px;"}),a=t("input",{type:"text",placeholder:"https://github.com/owner/repo",class:"grow"}),d=l("search","Scan","secondary"),i=l("close","Cancel","secondary");function o(){c.contains(s)&&c.removeChild(s)}function p(){const e=a.value.trim();e&&(n.postMessage({type:"scanGitHub",url:e}),o())}d.addEventListener("click",p),i.addEventListener("click",o),a.addEventListener("keydown",e=>{"Enter"===e.key&&p(),"Escape"===e.key&&o()}),s.appendChild(a),s.appendChild(d),s.appendChild(i),c.appendChild(s),setTimeout(()=>a.focus(),10)}),y.appendChild(u),c.appendChild(y),c.appendChild(t("hr")),d.appendChild(c);const m=t("div",{class:"stack"});if(d.appendChild(m),!i.discovered.length){const e=t("div",{class:"empty"});return e.appendChild(a("inbox","codicon-large")),e.appendChild(t("div",{class:"muted",text:"No discovered skills yet. Use Scan or Import buttons above."})),void m.appendChild(e)}const k=t("div",{class:"row",style:"margin-bottom: 12px;"}),v=t("input",{type:"checkbox"});v.addEventListener("change",()=>{const e=v.checked;d.querySelectorAll(".item-check").forEach(t=>{t.checked=e})}),k.appendChild(v),k.appendChild(t("span",{class:"select-all-label",text:"Select All"}));const g=l("cloud-download","Import Selected","secondary");g.addEventListener("click",()=>{const t=[];d.querySelectorAll(".item-check:checked").forEach(s=>{const a=parseInt(s.dataset.index||"0");if(!i.discovered[a])return;const l=i.discovered[a],d=document.getElementById(`tags-${l.md5}`),n=d?e(d.value):[];t.push({skill:l,tags:n})}),0!==t.length&&n.postMessage({type:"batchImportSkills",items:t,count:t.length})}),k.appendChild(g),m.appendChild(k),i.discovered.forEach((s,d)=>{const c=i.imported.find(e=>e.md5===s.md5),o=!!i.imported.find(e=>e.name===s.name)&&!c,p=t("div",{class:"skill-item"});p.addEventListener("click",e=>{const t=e.target;if("input"===t.tagName.toLowerCase()||"button"===t.tagName.toLowerCase())return;const s=p.querySelector(".item-check");s&&(s.checked=!s.checked)});const r=t("div",{class:"row"}),h=t("input",{type:"checkbox",class:"item-check","data-index":d});r.appendChild(h),r.appendChild(t("div",{class:"skill-title",text:s.name})),p.appendChild(r),p.appendChild(t("div",{class:"muted",text:s.description||""}));const y=t("div",{class:"skill-meta"});if(s.isRemote){const e=t("span",{class:"badge badge-remote"});e.appendChild(a("github")),e.appendChild(document.createTextNode(" GitHub")),y.appendChild(e)}if(c){const e=t("span",{class:"badge"});e.appendChild(a("check")),e.appendChild(document.createTextNode(" Imported")),y.appendChild(e)}else if(o){const e=t("span",{class:"badge"});e.appendChild(a("warning")),e.appendChild(document.createTextNode(" Name conflict")),y.appendChild(e)}p.appendChild(y);const u=t("div",{class:"row"}),k=t("input",{type:"text",placeholder:"tag1, tag2",class:"grow",id:`tags-${s.md5}`,value:c?.tags?.join(", ")||""});u.appendChild(k);const v=l(c?"sync":"cloud-download",c?"Re-import":o?"Overwrite":"Import",c||o?"secondary":"primary");v.addEventListener("click",()=>{n.postMessage({type:"importSkill",skill:s,tags:e(k.value),isSingle:!0})}),u.appendChild(v),p.appendChild(u),m.appendChild(p)})}(r,c,n):"skillsWizard.mySkillsView"===p?function(e,a,n){s(e);const c=t("div",{class:"stack"});if(e.appendChild(c),!a.imported.length){const e=t("div",{class:"empty"});e.appendChild(document.createElement("br"));const s=t("div",{class:"muted",text:"No imported skills yet."});return e.appendChild(s),void c.appendChild(e)}const o=t("div",{class:"row",style:"margin-bottom: 12px;"}),p=t("input",{type:"text",placeholder:"Search skills...",class:"grow",id:"search-my-skills"});function r(){const e=p.value.toLowerCase(),t=y.value;c.querySelectorAll(".skill-item").forEach(s=>{const l=parseInt(s.dataset.originalIndex||"0"),d=a.imported[l];if(!d)return;const i=!e||d.name.toLowerCase().includes(e)||(d.description||"").toLowerCase().includes(e)||(d.tags||[]).some(t=>t.toLowerCase().includes(e)),n="all"===t||(d.tags||[]).includes(t);s.style.display=i&&n?"block":"none"})}p.addEventListener("input",r),o.appendChild(p),c.appendChild(o);const h=t("div",{class:"row",style:"margin-bottom: 12px;"});h.appendChild(t("span",{text:"Filter by tag:"}));const y=t("select",{class:"grow"}),u=Array.from(new Set(a.imported.flatMap(e=>Array.isArray(e.tags)?e.tags:[]))).sort();y.appendChild(t("option",{value:"all",text:"All tags"})),u.forEach(e=>{y.appendChild(t("option",{value:e,text:e}))}),y.value="all",y.addEventListener("change",r),h.appendChild(y),c.appendChild(h);const m=t("div",{class:"row",style:"margin-bottom: 12px;"}),k=t("input",{type:"checkbox"});k.addEventListener("change",()=>{const t=k.checked;e.querySelectorAll(".item-check").forEach(e=>{e.checked=t})}),m.appendChild(k),m.appendChild(t("span",{class:"select-all-label",text:"Select All"}));const v=l("trash","Delete Selected","secondary");v.addEventListener("click",()=>{const t=[];e.querySelectorAll(".item-check:checked").forEach(e=>{const s=e.dataset.skillId;s&&t.push(s)}),0!==t.length?n.postMessage({type:"requestBatchDeleteSkills",ids:t}):alert("Please select at least one skill to delete.")}),m.appendChild(v);const g=l("export","Export (zip)","secondary");g.addEventListener("click",()=>{const t=[];e.querySelectorAll(".item-check:checked").forEach(e=>{const s=e.dataset.skillId;s&&t.push(s)}),0!==t.length?n.postMessage({type:"exportSkillsZip",ids:t}):alert("Please select at least one skill to export.")}),m.appendChild(g);const C=l("layers","Create preset","secondary");C.addEventListener("click",s=>{s.stopPropagation();const a=[];if(e.querySelectorAll(".item-check:checked").forEach(e=>{const t=e.dataset.skillId;t&&a.push(t)}),0===a.length)return void alert("Please select at least one skill first.");const d=c.querySelector(".preset-name-overlay");d&&c.removeChild(d);const i=t("div",{class:"preset-name-overlay row",style:"margin: 12px 0; background: var(--vscode-input-background); padding: 12px; border-radius: 4px;"}),o=t("input",{type:"text",placeholder:"Preset name",class:"grow"}),p=l("check","Create","primary");p.addEventListener("click",()=>h());const r=l("close","Cancel","secondary");function h(){const e=o.value.trim();if(!e)return;n.postMessage({type:"createPresetWithSkills",name:e,skillIds:a});const t=c.querySelector(".preset-name-overlay");t&&c.removeChild(t)}r.addEventListener("click",()=>{const e=c.querySelector(".preset-name-overlay");e&&c.removeChild(e)}),o.addEventListener("keydown",e=>{if("Enter"===e.key&&h(),"Escape"===e.key){const e=c.querySelector(".preset-name-overlay");e&&c.removeChild(e)}}),i.appendChild(o),i.appendChild(p),i.appendChild(r),m.nextSibling?c.insertBefore(i,m.nextSibling):c.appendChild(i),setTimeout(()=>o.focus(),50)}),m.appendChild(C),c.appendChild(m),a.imported.forEach((t,a)=>{const{card:o,actions:p,checkbox:r}=i(t,n,{className:"skill-item",checkboxClass:"item-check",actionBarStyle:"display:none; margin-top: 12px;"});if(o.dataset.skillId=t.id,o.dataset.originalIndex=String(a),o.addEventListener("click",t=>{const s=t.target;if("input"===s.tagName.toLowerCase()||"button"===s.tagName.toLowerCase())return;const a=o.classList.contains("selected");e.querySelectorAll(".skill-item").forEach(e=>{e.classList.remove("selected");const t=e.querySelector(".action-bar");t&&(t.style.display="none")}),a?(p&&(p.style.display="none"),r&&(r.checked=!1)):(o.classList.add("selected"),p&&(p.style.display="flex"),r&&(r.checked=!0))}),p){const e=l("plus","Add to workspace","primary");e.addEventListener("click",()=>n.postMessage({type:"addToWorkspace",id:t.id}));const a=l("file-code","View files","secondary");a.addEventListener("click",()=>n.postMessage({type:"openSkillFile",id:t.id}));const i=l("trash","Delete","secondary");let c;i.addEventListener("click",()=>n.postMessage({type:"requestDeleteSkill",id:t.id}));const o=()=>{p&&(s(p),p.appendChild(e),p.appendChild(a),c&&p.appendChild(c),p.appendChild(i))};c=d(t,p,o,n),o()}c.appendChild(o)}),r()}(r,c,n):"skillsWizard.presetsView"===p?function(e,a,n,c){s(e);const o=t("div",{class:"stack"});e.appendChild(o);const p=t("div",{class:"hint",style:"margin-bottom: 16px;"});p.textContent='Tip: Go to My Skills, select skills, then click "Create preset"',o.appendChild(p);const r=t("div",{class:"row",style:"margin-bottom: 12px;"}),h=t("input",{type:"text",placeholder:"Search presets...",class:"grow",id:"search-presets"});h.addEventListener("input",()=>{const e=h.value.toLowerCase();o.querySelectorAll(".preset-item").forEach(t=>{const s=t.dataset.presetName||"";t.style.display=s.toLowerCase().includes(e)?"block":"none"})}),r.appendChild(h),o.appendChild(r);const y=t("div",{class:"row",style:"margin-bottom: 12px;"}),u=t("input",{type:"checkbox"});u.addEventListener("change",()=>{const t=u.checked;e.querySelectorAll(".preset-check").forEach(e=>{e.checked=t})}),y.appendChild(u),y.appendChild(t("span",{class:"select-all-label",text:"Select All"}));const m=l("export","Export (zip)","secondary");m.addEventListener("click",()=>{const t=[];e.querySelectorAll(".preset-check:checked").forEach(e=>{const s=e.dataset.presetId;s&&t.push(s)}),0!==t.length?c.postMessage({type:"exportPresetsZip",ids:t}):alert("Please select at least one preset to export.")}),y.appendChild(m);const k=l("trash","Delete Selected","secondary");if(k.addEventListener("click",()=>{const t=[];e.querySelectorAll(".preset-check:checked").forEach(e=>{const s=e.dataset.presetId;s&&t.push(s)}),0!==t.length?c.postMessage({type:"requestBatchDeletePresets",ids:t}):alert("Please select at least one preset to delete.")}),y.appendChild(k),o.appendChild(y),o.appendChild(t("hr")),!a.presets.length){const e=t("div",{class:"empty"});e.appendChild(document.createElement("br"));const s=t("div",{class:"muted",text:"No presets yet. Go to My Skills to create one."});return e.appendChild(s),void o.appendChild(e)}a.presets.forEach((p,r)=>{const h=t("div",{class:"preset-item","data-preset-name":p.name,"data-preset-idx":String(r)}),y=t("div",{class:"row"}),u=t("input",{type:"checkbox",class:"preset-check","data-preset-id":p.id});u.addEventListener("click",e=>e.stopPropagation()),y.appendChild(u);const m=(p.skillIds||[]).length,k=t("div",{class:"skill-title editable",text:`${p.name} (${m} skills)`});k.title="Click to edit name",k.addEventListener("click",e=>{e.stopPropagation(),k.style.display="none";const s=t("input",{type:"text",value:p.name,class:"grow"});let a=!1;function l(){const e=s.value.trim();e&&e!==p.name&&c.postMessage({type:"updatePreset",preset:{...p,name:e}}),y.contains(s)&&y.removeChild(s),k.textContent=`${e||p.name} (${m} skills)`,k.style.display="block"}s.addEventListener("blur",()=>{a||(a=!0,l())}),s.addEventListener("keydown",e=>{"Enter"===e.key&&(a=!0,l()),"Escape"===e.key&&(y.contains(s)&&y.removeChild(s),k.style.display="block")}),y.insertBefore(s,k),setTimeout(()=>s.focus(),10)}),y.appendChild(k),y.addEventListener("click",t=>{if("input"===t.target.tagName.toLowerCase())return;const s=h.classList.contains("selected");if(e.querySelectorAll(".preset-item").forEach(e=>{e.classList.remove("selected"),e.classList.remove("expanded");const t=e.querySelector(".preset-actions");t&&(t.style.display="none");const s=e.querySelector(".preset-expanded");s&&(s.style.display="none")}),!s){h.classList.add("selected");const e=h.querySelector(".preset-actions");e&&(e.style.display="flex"),n.selectedPresetId=p.id}}),h.appendChild(y);const v=t("div",{class:"preset-expanded",style:"display:none; margin-top:12px;"}),g=a.imported.filter(e=>(p.skillIds||[]).includes(e.id));if(0===g.length)v.appendChild(t("div",{class:"muted",text:"No skills in this preset."}));else{const e=t("div",{class:"row",style:"margin-bottom: 12px;"}),a=t("input",{type:"checkbox"});a.addEventListener("change",()=>{const e=a.checked;v.querySelectorAll(".preset-skill-check").forEach(t=>{t.checked=e})}),e.appendChild(a),e.appendChild(t("span",{class:"select-all-label",text:"Select All"}));const n=l("remove","Remove from preset","secondary");n.addEventListener("click",e=>{e.stopPropagation();const t=[];v.querySelectorAll(".preset-skill-check:checked").forEach(e=>{const s=e.dataset.skillId;s&&t.push(s)}),0!==t.length?c.postMessage({type:"requestRemoveFromPreset",presetId:p.id,skillIds:t}):alert("Please select at least one skill to remove.")}),e.appendChild(n),v.appendChild(e),g.forEach(e=>{const{card:t,actions:a,checkbox:n}=i(e,c,{className:"skill-card-mini",nameClass:"skill-title-small editable",checkboxClass:"preset-skill-check",actionBarClass:"row action-bar",actionBarStyle:"display:none; margin-top: 12px;"});if(t.addEventListener("click",e=>{const s=e.target;if("input"===s.tagName.toLowerCase()||"button"===s.tagName.toLowerCase())return;const l=t.classList.contains("selected");v.querySelectorAll(".skill-card-mini").forEach(e=>{e.classList.remove("selected");const t=e.querySelector(".action-bar");t&&(t.style.display="none")}),l?n&&(n.checked=!1):(t.classList.add("selected"),a&&(a.style.display="flex"),n&&(n.checked=!0))}),a){let t;const i=l("remove","Remove","secondary");i.addEventListener("click",t=>{t.stopPropagation(),c.postMessage({type:"requestRemoveFromPreset",presetId:p.id,skillIds:[e.id]})});const n=l("file-code","View files","secondary");n.addEventListener("click",t=>{t.stopPropagation(),c.postMessage({type:"openSkillFile",id:e.id})});const o=()=>{a&&(s(a),t&&a.appendChild(t),a.appendChild(n),a.appendChild(i))};t=d(e,a,o,c),o()}v.appendChild(t)})}h.appendChild(v);const C=t("div",{class:"row preset-actions",style:"display:none; margin-top:12px;"}),f=l("edit","Edit skills","secondary");f.addEventListener("click",e=>{e.stopPropagation();const t=h.classList.contains("expanded");h.classList.toggle("expanded"),v.style.display=t?"none":"block",f.textContent="",f.appendChild(t?l("edit","Edit skills","secondary").querySelector(".codicon"):l("chevron-up","Hide skills","secondary").querySelector(".codicon")),f.appendChild(document.createTextNode(t?" Edit skills":" Hide skills")),t?n.expandedPresetIds.delete(p.id):n.expandedPresetIds.add(p.id)}),C.appendChild(f);const x=l("layers","Apply (Merge)","primary");x.addEventListener("click",()=>c.postMessage({type:"applyPreset",id:p.id,mode:"merge"})),C.appendChild(x);const E=l("replace","Apply (Replace)","secondary");E.addEventListener("click",()=>c.postMessage({type:"applyPreset",id:p.id,mode:"replace"})),C.appendChild(E);const b=l("export","Export","secondary");b.addEventListener("click",()=>c.postMessage({type:"exportPresetsZip",ids:[p.id]})),C.appendChild(b);const L=l("trash","Delete","secondary");L.addEventListener("click",()=>c.postMessage({type:"requestDeletePreset",id:p.id})),C.appendChild(L),h.appendChild(C),o.appendChild(h),n.expandedPresetIds.has(p.id)&&(h.classList.add("expanded"),v.style.display="block",f.textContent="",f.appendChild(l("chevron-up","","secondary").querySelector(".codicon")),f.appendChild(document.createTextNode(" Hide skills"))),n.selectedPresetId===p.id&&(h.classList.add("selected"),C.style.display="flex")})}(r,c,o,n):"skillsWizard.settingsView"===p&&function(e,a,d){s(e);const i=t("div",{class:"stack"});e.appendChild(i);const n=t("div",{class:"stack",style:"margin-bottom: 24px;"}),c=t("div",{text:"Default Export Path",style:"font-weight: 600; margin-bottom: 8px;"}),o=t("input",{type:"text",value:a.defaultExportPath||".claude/skills/",class:"grow",id:"setting-export-path"}),p=t("div",{class:"muted",text:"Relative path where skills will be exported in the workspace.",style:"margin-top: 6px;"});n.appendChild(c),n.appendChild(o),n.appendChild(p),i.appendChild(n);const r=t("div",{class:"stack",style:"margin-bottom: 24px;"}),h=t("div",{text:"Storage Path",style:"font-weight: 600; margin-bottom: 8px;"}),y=t("input",{type:"text",value:a.storagePath||"",class:"grow",placeholder:"(empty = default profile storage)",id:"setting-storage-path"}),u=t("div",{class:"muted",text:"Custom storage path for imported skills & presets. Leave empty to use default.",style:"margin-top: 6px;"});r.appendChild(h),r.appendChild(y),r.appendChild(u),i.appendChild(r);const m=l("save","Save Settings","primary");m.addEventListener("click",()=>{d.postMessage({type:"updateSettings",defaultExportPath:o.value,storagePath:y.value})}),i.appendChild(m)}(r,c,n))}())}),window.addEventListener("load",()=>{n.postMessage({type:"webviewReady"})}),n.postMessage({type:"refresh"})})();
//# sourceMappingURL=main.js.map